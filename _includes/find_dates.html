{% assign reading-day = false %}
{% assign lab-day = false %}
{% assign assigned-day = false %}
{% assign due-day = false %}
{% assign due-time = false %}

{% for find_dates_week_data in site.data.schedule %}
  {% for find_dates_day in find_dates_week_data[1] %}
    {% assign find_dates_match = find_dates_day[1].reading | where_exp: "find_dates_reading", "find_dates_reading.page == include.url" | first %}
    {% if find_dates_match %}
      {% unless reading-day %}
        {% assign reading-day = find_dates_day[0] %}
      {% endunless %}
    {% endif %}
    
    {% assign find_dates_match = find_dates_day[1].lab | where_exp: "find_dates_lab", "find_dates_lab.page == include.url" | first %}
    {% if find_dates_match %}
      {% assign lab-day = find_dates_day[0] %}
    {% endif %}
    
    {% assign find_dates_match = find_dates_day[1].assigned | where_exp: "find_dates_assigned", "find_dates_assigned.page == include.url" | first %}
    {% if find_dates_match %}
      {% assign assigned-day = find_dates_day[0] %}
    {% endif %}
    
    {% for find_dates_due in find_dates_day[1].due %}
      {% if find_dates_due.page == include.url %}
        {% assign due-day = find_dates_day[0] %}
        {% assign due-time = find_dates_due.time %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endfor %}

{% for find_dates_day in site.data.extra %}
  {% assign find_dates_match = find_dates_day.reading | where_exp: "find_dates_reading", "find_dates_reading.page == include.url" | first %}
  {% if find_dates_match %}
    {% unless reading-day %}
      {% assign reading-day = find_dates_day.date %}
    {% endunless %}
  {% endif %}
  
  {% assign find_dates_match = find_dates_day.lab | where_exp: "find_dates_lab", "find_dates_lab.page == include.url" | first %}
  {% if find_dates_match %}
    {% assign lab-day = find_dates_day.date %}
  {% endif %}
  
  {% assign find_dates_match = find_dates_day.assigned | where_exp: "find_dates_assigned", "find_dates_assigned.page == include.url" | first %}
  {% if find_dates_match %}
    {% assign assigned-day = find_dates_day.date %}
  {% endif %}
  
  {% for find_dates_due in find_dates_day.due %}
    {% if find_dates_due.page == include.url %}
      {% assign due-day = find_dates_day.date %}
      {% assign due-time = find_dates_due.time %}
    {% endif %}
  {% endfor %}
{% endfor %}
